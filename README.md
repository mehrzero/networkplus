# Understanding Ports in Linux Servers

![Linux Ports](https://via.placeholder.com/1200x400?text=Linux+Server+Ports+Guide)

این راهنما به بررسی مفهوم **پورت** در سرورهای لینوکسی، مدیریت آنها، و بهترین روشهای امنیتی میپردازد.  
**هدف**: ایجاد یک مرجع آموزشی برای توسعهدهندگان، مدیران سیستم، و علاقهمندان به شبکه.

---

## فهرست مطالب
1. [پورت چیست؟](#۱-پورت-چیست)  
2. [انواع پورتها و پروتکلها](#۲-انواع-پورتها-و-پروتکلها)  
3. [پورتهای معروف و کاربردها](#۳-پورتهای-معروف-و-کاربردها)  
4. [مدیریت پورتها در لینوکس](#۴-مدیریت-پورتها-در-لینوکس)  
5. [پیکربندی پورتها در سرویسها](#۵-پیکربندی-پورتها-در-سرویسها)  
6. [امنیت پورتها](#۶-امنیت-پورتها)  
7. [عیبیابی پورتها](#۷-عیبیابی-پورتها)  
8. [منابع و مراجع](#۸-منابع-و-مراجع)  

---

## ۱. پورت چیست؟
پورت یک شماره منطقی بین **۱ تا ۶۵۵۳۵** است که به برنامهها اجازه میدهد از طریق شبکه با یکدیگر ارتباط برقرار کنند.  
- **مثال**: فرض کنید سرور شما یک آپارتمان است. هر سرویس (مثل وبسرور، دیتابیس) در یک واحد (پورت) خاص قرار دارد.

---

## ۲. انواع پورتها و پروتکلها
- **TCP (Transmission Control Protocol)**: اتصالگرا و قابل اطمینان (مثال: مرورگر وب).  
- **UDP (User Datagram Protocol)**: بدون اتصال و سریع (مثال: ویدیو استریمینگ).  

### محدوده پورتها:
| محدوده       | توضیح                     |
|--------------|---------------------------|
| ۱–۱۰۲۳      | پورتهای سیستمی (نیاز به دسترسی ریشه) |
| ۱۰۲۴–۴۹۱۵۱  | پورتهای ثبتشده (مثال: ۳۳۰۶ برای MySQL) |
| ۴۹۱۵۲–۶۵۵۳۵ | پورتهای موقت (کلاینتها) |

---

## ۳. پورتهای معروف و کاربردها
| پورت | پروتکل | سرویس               | توضیح                  |
|------|---------|---------------------|------------------------|
| ۲۲   | TCP     | SSH                 | اتصال امن به سرور     |
| ۸۰   | TCP     | HTTP                | ترافیک وب             |
| ۴۴۳  | TCP     | HTTPS               | وب امن                |
| ۳۳۰۶ | TCP     | MySQL               | دیتابیس              |
| ۵۳   | TCP/UDP | DNS                 | تبدیل نام به آیپی     |
| ۶۳۷۹ | TCP     | Redis               | دیتابیس درونحافظهای |

---

## ۴. مدیریت پورتها در لینوکس

### ابزارهای بررسی پورتها:
#### ۱. **`netstat`** (منسوخشده، اما هنوز پرکاربرد):
```bash
netstat -tuln  # نمایش پورتهای Listening (TCP/UDP)
```

#### ۲. **`ss`** (جایگزین مدرن):
```bash
ss -tuln  # نمایش پورتها با جزییات
```

#### ۳. **`nmap`** (اسکن پورت):
```bash
nmap -sT localhost  # اسکن پورتهای باز روی سرور
```

#### ۴. **`lsof`** (لیست فایلهای باز):
```bash
lsof -i :80  # بررسی فرایندهای استفادهکننده از پورت ۸۰
```

---

## ۵. پیکربندی پورتها در سرویسها

### مثال ۱: تغییر پورت SSH
فایل پیکربندی SSH (`/etc/ssh/sshd_config`):
```bash
Port 2222  # تغییر پورت پیشفرض ۲۲ به ۲۲۲۲
```
سپس سرویس را ریاستارت کنید:
```bash
sudo systemctl restart sshd
```

### مثال ۲: تنظیم پورت در Nginx
در فایل کانفیگ Nginx:
```nginx
server {
    listen 8080;  # تغییر پورت پیشفرض ۸۰ به ۸۰۸۰
    server_name example.com;
}
```

### فایروال (UFW/Firewalld):
- باز کردن پورت در UFW:
  ```bash
  sudo ufw allow 4567/tcp
  ```
- باز کردن پورت در Firewalld:
  ```bash
  sudo firewall-cmd --permanent --add-port=4567/tcp
  sudo firewall-cmd --reload
  ```

---

## ۶. امنیت پورتها
- **پورتهای غیرضروری را ببندید** (مثال: پورت ۲۳ Telnet منسوخشده است).
- از پورتهای غیراستاندارد برای سرویسهای حیاتی استفاده کنید (مثال: SSH روی پورت ۲۲۲۲).
- از **فایروال** برای محدود کردن دسترسی به پورتها استفاده کنید.
- ابزارهای امنیتی پیشرفته:
  - **Fail2ban**: مسدودسازی IPهای مشکوک.
  - **Port Knocking**: مخفی کردن پورتها تا زمانی که دنباله خاصی از پورتها فراخوانی شود.

---

## ۷. عیبیابی پورتها
- **بررسی Listening پورت**:
  ```bash
  ss -tuln | grep 3306
  ```
- **آزمایش اتصال** با `telnet` یا `nc`:
  ```bash
  telnet example.com 80  # بررسی دسترسی به پورت ۸۰
  nc -zv example.com 3306  # تست پورت MySQL
  ```
- **بررسی فایروال**:
  ```bash
  sudo ufw status  # وضعیت UFW
  ```

---

## ۸. منابع و مراجع
- [Linux man pages](https://man7.org/linux/man-pages/)  
- [Nmap Documentation](https://nmap.org/docs.html)  
- [SSH Port Security Best Practices](https://www.ssh.com/academy/ssh/port)  

---

## مجوز (License)
این محتوا تحت مجوز [MIT License](LICENSE) منتشر شده است. استفاده و مشارکت آزاد است!

---

🛠️ **مشارکت در توسعه**: اگر پیشنهادی دارید، Pull Request ارسال کنید یا Issue جدید باز کنید.  
📬 **تماس**: [ایمیل نویسنده](mailto:example@domain.com) | [توییتر](https://twitter.com/example)

```

این محتوا را میتوانید در قالب `README.md` در ریپازیتوری GitHub قرار دهید. برای جذابیت بیشتر، میتوانید تصاویر یا دیاگرامهای مرتبط اضافه کنید.
